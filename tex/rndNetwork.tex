Observing the real distributions of wealth one can notice that poorness and richness are attractive properties, which means that poor (riches) tend to impoverish (enrich) their neighbors.
The result of this is that looking at the network one can observe the formation of clusters of both rich and poor individuals. \\
However, to observe this we must move from a fully connected network, where everybody can interact with everybody, to a partially connected network, where each individual is linked to a few others.
So, we now take a random network in which every agent has a uniformly distributed number of links, with mean $12$, keeping previous parameters and dynamics preserved.
At this point, if we let the system evolve, we expect to see again an exponential distribution of wealth: in Fig. \ref{fig:fixedExpo} we obtain a fit with $C = 0.24 \pm 0.02$ and $\gamma = -0.22 \pm 0.02$ as predicted by Eq. (\ref{eq:expo}).
\begin{figure}[H]
    \centering
    \scalebox{.7}{\input{./img/fixedExpo.pgf}}
    \caption{\emph{Simulation of $10^6$ fair matches between $n = 10^4$ agents on a partially connected network with $\alpha = 5$ initial coins each. 
                    An exponential fit results in an exponent $\gamma = -0.22 \pm 0.02$ and a constant $C = 0.24 \pm 0.02$.}}
    \label{fig:fixedExpo}
\end{figure}
We want now to confirm our hypothesis, i.e. that poor form clusters. \\
The fact that poor form clusters means that the probability that an agent is poor is larger if one or more of its neighbors (individuals linked to it in the network) are also poor. Another way to look at this is to take a random couple of agents and considering the probability that the two are linked. \\
We are asking that both agents are poor, and also that they are linked, so we are considering the probability of the intersection:
$$
	\mathbb{P}(x \ poor \cap y \ poor \cap linked)
$$
This can be written in terms of the conditional probability:
$$
	\mathbb{P}(x \ poor \cap y \ poor \cap linked) = \mathbb{P}(linked \ \vert \ x \ poor \cap y \ poor) \mathbb{P}(x \ poor \cap y \ poor) 
$$
$$
	= \mathbb{P}(linked \ \vert \ x \ poor \cap y \ poor) \mathbb{P}(x \ poor)\mathbb{P}(y \ poor) 
$$
Where we considered the fact that the two random agents $x$ and $y$ are poor to be indipendent events. \\
At this point, to test our hypothesis, we want to compare the conditional probability $\mathbb{P}(linked \vert x poor \cap y poor)$ with the generic probability that a two agents in a random couple are linked, $\mathbb{P}(linked)$. We define the null hypothesis, which is that poorness is not an attractive property, so the probability of having a linked couple of agents doesn't change if we know that they are both poor. \\
If the null hypothesis was true, we would expect the two probabilities to be identical, because then the poorness of two individuals and the fact that they are linked or not would be completely unrelated. \\
To compute the conditional probability we take a list of all the poor individuals and compute all the possible combinations of them. Then, we scan through them and and count in how many of this couples the two agents are linked. \\
To calculate the probability $\mathbb{P}(linked)$ we take all the agents in the network and compute all the possible combinations of them, and then count in how many of them the couple is linked. \\
Through the simulation we find for these two probabilities the values:
$$
	\mathbb{P}(linked \ \vert \ x \ poor \cap y \ poor) = 0.72\%
$$
$$
	\mathbb{P}(linked) = 0.98\%
$$
The two probabilities show a difference significant enough to suggest that the null hypothesis is false, and we can thus say that poorness is indeed an attractive trait.
